{% extends "base.html" %} 
{% load staticfiles %}

{% block content %}
    <div id="mapid" class="container" style="height: 100vh"></div>
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
    var mymap = L.map('mapid').setView([51.5, -0.09], 11);

    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZ2V0ZnJlc2hiYWtlZCIsImEiOiJjaXBzbjdoZGUwM3oxZnZtMmltazJ0eHU4In0.B9Vu_0d7ZJlCXfwP5V_s5A', {
        maxZoom: 20,
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>',
        id: 'mapbox.streets'
    }).addTo(mymap);


    // var circle = L.circle([51.508, -0.21], {
    //     color: 'red',
    //     fillColor: '#f03',
    //     fillOpacity: 0.5,
    //     radius: 2500
    // }).addTo(mymap);


    var polygon = L.polygon([
        [51.509, -0.1],
        [51.503, -0.03],
        [51.58, -0.057]
    ], {
        color: 'red', 
        // stroke: false,
        weight: 2,
        fillColor: 'grey',
        fillOpacity: 0.8,
    }).addTo(mymap);

    polygon.bindPopup("I am a polygon.");

    var polygon_green = L.polygon([
        [51.54, -0.38],
        [51.48, -0.41],
        [51.46, -0.15],
        [51.51, -0.13]
    ], {
        color: 'green', 
        // stroke: false,
        weight: 2,
        // fillColor: 'black',
        // fillOpacity: 0.2,
    }).addTo(mymap);

    // var polyline = L.polyline([
    //     [51.509, -0.08],
    //     [51.503, -0.06],
    //     [51.51, -0.047]
    // ], {color: 'red'}).addTo(mymap);

    var currentIcon = L.icon({
        iconUrl: '{% static "img/PIN.png" %}',
        iconSize:     [50, 45], // size of the icon
        iconAnchor:   [13, 35], // point of the icon which will correspond to marker's location
    });

    var marker = L.marker([51.5, -0.09], {icon: currentIcon}).addTo(mymap); 

    function onMapClick(e) {
        // update current marker
        mymap.removeLayer(marker); 
        marker = L.marker(e.latlng, {icon: currentIcon}).addTo(mymap).setLatLng(e.latlng);
    }

    mymap.on('click', onMapClick);
</script>
{% endblock %}    
